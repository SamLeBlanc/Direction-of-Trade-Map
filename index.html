<!DOCTYPE html>
<meta charset="utf-8">

<head>
  <!-- Assets -->
  <script src="assets/d3.v6.js"></script>
  <script src="assets/d3-legend.min.js"></script>

  <!-- Scripts -->
  <script src="index.js"></script>
  <script src="scripts/hotkeys.js"></script>
  <script src="scripts/zoom.js"></script>
  <script src="scripts/links.js"></script>
  <!-- <script src="scripts/capitals.js"></script> -->
  <script src="scripts/countries.js"></script>
  <script src="scripts/water.js"></script>
  <script src="scripts/legend.js"></script>
  <!-- <script src="scripts/dashboard.js"></script> -->


  <!-- Styles -->
  <link rel="stylesheet" href="styles/style.css">

  <!-- Rubik font from Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@900&display=swap" rel="stylesheet">

  <script src="assets/jquery-1.12.4.js"></script>
  <script src="assets/jquery-ui.js"></script>

  <link rel="stylesheet" href="assets/jquery-ui.css">
</head>

<body>

<div class="settings">
  <div style="font-family: 'Rubik', sans-serif; font-size: 2em; color:hotpink; -webkit-text-stroke: 1px black;">Direction of Trade Map</div>
  <div style="padding:10px"></div>
  <div style="font-family: 'Rubik', sans-serif;">Settings</div>
  <div>
    <div style="padding:1px 3px;">
      <select name="direction-select" id="direction-select" onchange="if (lonks) lonks.remove();" style="width:137px;">
        <option value="import">Imports (I)</option>
        <option value="export">Exports (E)</option>
        <option value="net">Net Exports (N)</option>
      </select>
    </div>
    <div style="padding:1px 3px;">
      <input type="checkbox" id="links-checkbox" name="Links" value="Links" onclick="draw()">
      <label for="Links">Links (L)</label>
      <input id="links-number" type="number" value="5" style="width:40px">
    </div>
    <!-- <div style="padding:1px 3px;">
      <input type="checkbox" id="capitals-checkbox" name="Capitals" value="Capitals" onclick="draw()">
      <label for="Capitals">Capitals (C)</label><br>
    </div> -->
  </div>
  <div>
     <button id="dash-map-button" type="button" onclick="alert()">Switch to Dashboard</button>
  </div>
  <br>
  <div style="font-family: 'Rubik', sans-serif; ">Source: IMF</div>
</div>

<div class="heading">
  <div class="title">
    <span id="title-country">Worldwide</span>
    <span id="title-direction">Imports</span>
  </div>
  <div class="info">
    <div id="info-1"></div>
    <div id="info-2"></div>
  </div>
</div>

<div id="wrapper" style="position: fixed; top: 70px;">
  <!-- SVG will live here -->
</div>
<!-- <div id="wrapper-2" style="position: fixed; top: 150px;">
</div> -->

<script>

// Calculate SVG dimensions
const width = window.innerWidth-20
const height = Math.min(window.innerHeight - 65, width/2)

// Define the SVG inside of the wrapper
const svg = d3.select("#wrapper")
.append("svg")
.attr("width", width)
.attr("height", height)
.call(zoom);

$('#wrapper-2').css({'top': height})

const svg2 = d3.select("#wrapper-2")
.append("svg")
.attr("width", width)
.attr("height", height)
.call(zoom);

svg2.append("rect")
.attr("id","test-rect")
.attr("width", "100%")
.attr("height", "100%")
.style("fill", "transparent")
.style("stroke", "black")
.style("stroke-width", 2)

// Create two high-level groups, for the water and land components, respectively
const ocean = svg.append("g");
const land = svg.append("g");

// Define the map projection and scale, then translate to proper position
const projection = d3.geoEqualEarth()
.scale(Math.min(0.55*width/ Math.PI, 0.55*width/ Math.PI))
.translate([width/2, height/2])

// Define path generator based on map projection
const path = d3.geoPath().projection(projection)

initializeHotkeys()
loadData()

  </script>
